<!DOCTYPE html>
<html><head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Edgecase tests</title>
    
    <script src="http://js.othermedia.com/helium.js" type="text/javascript"></script>
    <script type="text/javascript">
        JS.Packages(function() {
            this.file('http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js')
                .provides('jQuery');
        });
    </script>
    <script src="./packages.js" type="text/javascript"></script>
    
    <style type="text/css" media="screen">
        html, body {margin:0; border:none; padding:0; overflow:hidden;}
        .control {position:absolute; bottom:100px; right:100px; display:block; padding:10px; background:#000; color:#fff; font-family:'Times New Roman', serif; font-weight:bold; font-size:18px; font-style:italic; cursor:pointer;}
    </style>
</head><body>
    
    <img id="main" alt="" src="./images/colour-bars.png" style="display:none;">
    
    <script type="text/javascript">
        require('jQuery', 'EdgecaseJQ', function() {
            var scaleable, ctrl, visible;
            
            scaleable = new EdgecaseJQ.Concrete('#main');
            
            if (console && typeof console.log === 'function') {
                scaleable.on('load', function() {
                    console.log("Image loaded");
                });
                
                scaleable.on('hide', function() {
                    console.log("Image hidden");
                });
                
                scaleable.on('show', function() {
                    console.log("Image shown");
                });
            }
            
            scaleable.setup();
            
            ctrl = jQuery('<span class="control">Hide background</span>');
            scaleable.getHTML().after(ctrl);
            
            visible = true;
            
            ctrl.click(function() {
                if (visible) {
                    scaleable.hide();
                    ctrl.html('Show background');
                } else {
                    scaleable.show();
                    ctrl.html('Hide background');
                }
                
                visible = !visible;
            });
        });
    </script>
    
</body></html>
